<!--<div ng-include="'components/navbar/navbar.html'"></div> -->
<!--<div ng-controller="SearchTabsCtrl" ng-include="'app/searchtabs/searchtabs.html'"></div> -->
	 <md-toolbar md-scroll-shrink ng-controller="SearchTabsCtrl" ng-include="'app/searchtabs/searchtabs.html'" > </md-toolbar>
<section layout="row" flex>					
<md-content layout="row" layout-fill  layout-padding flex>
					

      <form layout-fill>
		<div layout="row">
		 	<md-switch ng-model="search.activeThreadsOnly" aria-label="Søg aktive tråde" ng-if="Auth.isLoggedIn()">
		 	    Mine aktive tråde
		 	  </md-switch>
			 <span flex layout-fill></span> <md-button ng-click="toggleSearchMapSideNav()"
		  				            class="md-primary"  ng-show="mdMedia('xs')">
		  				            {{'Søgning på kort' | translate}}
		  				          </md-button></div>
         <div layout-gt-xs="row">
	<md-input-container class="md-block" flex-gt-xs>	
	<label>Status</label> 
		 <md-select aria-label="status" ng-model="search.include[0].where.Determination_validation">
		           <md-option value="">Alle</md-option>        
		   <md-option value="Godkendt">Godkendte</md-option>
		   <md-option value="Valideres">Valideres</md-option>
		   <md-option value="Afventer">Afventer</md-option>
		   <md-option value="Afvist">Afviste</md-option>
		   <md-option value="Gammelvali">Ældre fund afventer</md-option>
		                 </md-select>
						 </md-input-container>
						 
						
		             
           <md-datepicker ng-model="search.fromDate" md-placeholder="Fra dato">
           </md-datepicker>
        
          
           <md-datepicker ng-model="search.toDate" md-placeholder="Til dato">
           </md-datepicker>
		  
         </div>
          <div layout-gt-xs="row">
		  
		   <md-input-container class="md-block" flex-gt-xs>
		           <label>Finder</label>
		           <input  ng-model="search.include[1].where.name" >
		         </md-input-container>
	  		   <md-input-container>
	  		           <label>Initialer</label>
	  		           <input  ng-model="search.include[1].where.Initialer">
	  		         </md-input-container>
		   
          </div>
          <div layout-gt-xs="row">
   	   <md-input-container class="md-block" flex-gt-xs>
   	           <label>Databasenummer</label>
   	           <input  ng-model="search.databasenumber" >
   	         </md-input-container>
		   	 <md-input-container >	
		   	<label>Rødlistestatus</label>  
		   <md-select aria-label="rødlistestatus" id="redlist" ng-model="search.include[0].where.Taxon_redlist_status">
  		 	<md-option value=""></md-option>
		     <md-option ng-value="{{['RE','CR', 'EN', 'VU', 'NT']}}" ng-selected="search.include[0].where.Taxon_redlist_status.length > 2">Alle rødlistede</md-option>
		     <md-option value="RE">RE - Forsvundet</md-option>
		     <md-option value="CR">CR - Kritisk truet</md-option>
		     <md-option value="EN">EN - Moderat truet</md-option>
		     <md-option value="VU">VU - Sårbar</md-option>
		     <md-option value="NT">NT - Næsten truet</md-option>
		     <md-option value="LC">LC - Ikke truet</md-option>
		     <md-option value="DD">DD - Utilstrækkelige data</md-option>
		     <md-option value="NA">NA - Ikke mulig</md-option>
		     <md-option value="NE">NE - Ikke bedømt</md-option>
		             </md-select>
		   	  </md-input-container>
			
          </div>
		

		<div layout-gt-xs="row">
      <md-chips ng-model="search.selectedHigherTaxa" md-autocomplete-snap md-require-match="true" ng-show="!search.DkNames" class="md-block" flex-gt-xs>

        <md-autocomplete
  	  	md-min-length="3"
  		md-no-cache="true"
            md-selected-item="selectedItem"
            md-search-text="searchText"
            md-items="item in querySearch(searchText)"
            md-item-text="item.FullName"
            placeholder="{{taxonPlaceholder}}">
          <span md-highlight-text="searchText">{{item.FullName}}</span>
        </md-autocomplete>
        <md-chip-template>
          <span>
            <strong>{{($chip.FullName) ? $chip.FullName: $chip.vernacularname_dk}}</strong>

          </span>
        </md-chip-template>
		
      </md-chips>
      <md-chips ng-model="search.selectedHigherTaxa" md-autocomplete-snap md-require-match="true" ng-show="search.DkNames" class="md-block" flex-gt-xs>

        <md-autocomplete
  	  	md-min-length="3"
  		md-no-cache="true"
            md-selected-item="selectedItem"
            md-search-text="searchText"
            md-items="item in querySearch(searchText)"
            md-item-text="item.vernacularname_dk"
            placeholder="{{taxonPlaceholder}}">
          <span md-highlight-text="searchText">{{item.vernacularname_dk}}</span>
        </md-autocomplete>
        <md-chip-template>
          <span>
            <strong>{{($chip.FullName) ? $chip.FullName: $chip.vernacularname_dk}}</strong>

          </span>
        </md-chip-template>
		
      </md-chips>
	
 	<md-switch ng-model="search.DkNames" aria-label="Søg danske navne">
 	    Danske navne
 	  </md-switch>
  </div>
   <div layout-gt-xs="row">
<md-switch ng-model="search.onlyHigherTaxa" aria-label="Højere taxa">
    Søg i slægter, familier, ordener osv.
  </md-switch>
	 
  </div>
   <div layout-gt-xs="row">
  <md-chips ng-model="search.selectedLocalities" md-autocomplete-snap md-require-match="true" class="md-block" flex-gt-xs>

    <md-autocomplete
  	md-min-length="3"
	md-no-cache="true"
        md-selected-item="selectedItem"
        md-search-text="searchText"
        md-items="item in querySearchLocality(searchText)"
        md-item-text="item.name"
        placeholder="{{'Lokalitet'}}">
      <span md-highlight-text="searchText">{{item.name}}</span>
    </md-autocomplete>
    <md-chip-template>
      <span>
        <strong>{{$chip.name}}</strong>

      </span>
    </md-chip-template>
	
  </md-chips>
<md-switch ng-model="search.includeForeign" aria-label="Inkludér udenlandske fund">
    Inkludér udenlandske fund
  </md-switch>
  </div>
  <div layout-gt-xs="row" ng-if="Auth.hasRole('validator')">
  	 <md-input-container >	
  	<label>livsstrategi</label>  
  <md-select aria-label="livsstrategi" id="livsstrategi" ng-model="search.livsstrategi">
	<md-option value=""></md-option>
    
    <md-option value="{{str.key}}" ng-repeat="str in strategiesUI">{{str[$translate.use()]}}</md-option>
    
            </md-select>
  	  </md-input-container>
  </div>
   <div layout="row" class="validator-button-container" flex>
	   <span layout-fill flex></span>
	   <md-button class="md-fab md-warn" aria-label="Nulstil formular" ng-click="resetForm()">
	               <ng-md-icon icon="autorenew"></ng-md-icon>
	           </md-button>
			   
	   




	<md-fab-speed-dial  md-direction="up"
	                         class='md-scale'>
	        <md-fab-trigger>
	          <md-button aria-label="menu" class="md-fab md-warn">
		  
	            <ng-md-icon icon="search"></ng-md-icon>
	          </md-button>
	        </md-fab-trigger>
	        <md-fab-actions>
          <md-button aria-label="liste" class="md-fab md-raised md-mini" ng-click="state.go('search-list')">
		  <md-tooltip md-direction="left" >Resultat i liste</md-tooltip>
            <ng-md-icon icon="list"></ng-md-icon>
          </md-button>
	          <md-button aria-label="map" class="md-fab md-raised md-mini" ng-click="state.go('search-map')">
			  <md-tooltip md-direction="left" >Resultat på kort</md-tooltip>
	            <ng-md-icon icon="map"></ng-md-icon>
	          </md-button>
	          
	        </md-fab-actions>
	      </md-fab-speed-dial>

  </div>
		 
        
      </form>
   
	
	
  </md-content>
	<md-sidenav id="searchmap-sidenav" class="md-sidenav-right md-whiteframe-z2" md-component-id="searchmapsidenav" md-is-locked-open="!$mdMedia('xs')">
		  <md-toolbar class="md-theme-light" layout="row" ng-if="mdMedia('xs')">
		   
		 
       
		          <h1 class="md-toolbar-tools">Søg på kort</h1>
		        </md-toolbar>
	      <md-content layout="row"  layout-padding>
       
	        
	         </md-content>
			<md-content  layout-padding>
			<leaflet id="searchformmap" width="100%" height="400px" center="mapsettings.center" ></leaflet>
		
	      </md-content>
	    </md-sidenav>
</section>
	        
	      
