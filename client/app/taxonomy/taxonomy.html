<div ng-include="'components/navbar/navbar.html'"></div>
<div class="container">

<div class="row" ng-controller="TaxonTabsCtrl" ng-include="'app/taxontabs/taxontabs.html'">	
	
</div>	

<div class="col-md-12" >
	<div ng-show="!checkboxes.OrphantTaxa">
	<p translate class="md-body-2">Find species, varietes and forms under selected higher taxa:</p>
	
    <md-chips ng-model="selectedHigherTaxa" md-autocomplete-snap md-require-match="true">
	
      <md-autocomplete
	  	md-min-length="3"
		md-no-cache="true"
          md-selected-item="selectedItem"
          md-search-text="searchText"
          md-items="item in querySearch(searchText)"
          md-item-text="item.FullName"
          placeholder="{{'Enter higher taxon' | translate}}">
        <span md-highlight-text="searchText">{{item.FullName}}</span>
      </md-autocomplete>
      <md-chip-template>
        <span>
          <strong>{{$chip.FullName}}</strong>
         
        </span>
      </md-chip-template>
    </md-chips>
</div>
	<md-switch class="col-md-2" ng-model="checkboxes.acceptedTaxaOnly" aria-label="Only accepted taxa" >
	         {{ 'Omit synonyms' | translate}}
	        </md-switch>
			
	<md-switch  class="col-md-2" ng-model="checkboxes.PresentInDK" aria-label="Only DK taxa">
	{{ 'Only DK taxa' | translate}}
	          
	        </md-switch>
	<md-switch  class="col-md-3" ng-model="checkboxes.OrphantTaxa" aria-label="Only DK taxa">
	{{ 'Find orphant taxa' | translate}}     
	        </md-switch>
			
<div class="col-md-4"><h3 class="md-headline pull-right">{{'Found' | translate}} {{taxonCount}} taxa</h3></div>
<md-progress-linear class="col-md-12" md-mode="indeterminate" ng-show="isLoading"></md-progress-linear>
<table st-persist="taxon_search_table" class="table taxontable" st-pipe="callServer" st-table="displayed">
	<thead>
	<tr>
		<th st-sort="_id" st-ratio="10">DkIndexNr</th>
		<th st-sort="FullName" st-ratio="40" translate>Full name</th>
		<th st-sort="TaxonName" translate>Epithet</th>
		<th st-sort="RankName" st-ratio="10" translate>Taxon rank</th>
		<th st-sort="attributes.DKnavn" translate>Dansk navn</th>
	</tr>
	<tr>
		<th st-ratio="10"><input class="form-control" st-search="_id" ></th>
		<th st-ratio="40"><input class="form-control" st-search="FullName" ></th>
		<th><input class="form-control" st-search="TaxonName"></th>
		<th st-ratio="10"><input class="form-control" st-search="RankName"></th>
		<th><input class="form-control" st-search="attributes.DKnavn"></th>
	</tr>
	</thead>
	<tbody ng-show="!isLoading">
	<tr ng-repeat="row in displayed">
		<td st-ratio="10">{{row._id}}</td>
		<td st-ratio="40"><a href="/taxonbase/taxon/{{row._id}}">{{row.FullName}}</a> <a href="/taxonbase/taxonbooklayout/{{row._id}}"><i class="fa fa-book"></i></a>
		</td>
		<td>{{row.TaxonName}}</td>
		<td st-ratio="10">{{row.RankName}}</td>
		<td>{{row.attributes.DKnavn}}</td>
	</tr>
	</tbody>
	<tbody ng-show="isLoading">
	<tr>
		<td colspan="4" class="text-center">Loading ... </td>
	</tr>
	</tbody>
	<tfoot>
	<tr>
		<td class="text-center" st-pagination="" st-displayed-pages="paginationPages" st-items-by-page="50" colspan="4">
		</td>
	</tr>
	</tfoot>
</table>
</div>
</div>
<div class="col-md-12">

<div ng-include="'components/footer/footer.html'"></div>
</div>


