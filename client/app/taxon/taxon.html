<md-toolbar class="searchtabs" ng-controller="TaxonTabsCtrl" ng-include="'app/taxontabs/taxontabs.html'">	
	
</md-toolbar>

<md-content   flex md-scroll-y  ng-cloak layout-align="center center" layout-padding>
	
	    	<div class="row" ng-show="!fetchingTaxon" ng-if="stateParams.id">
				<div class="col-md-6" ng-show="taxon.$promise && taxon._id !== undefined">	
					<small ng-if="!taxon.FunIndexNumber" translate>Full Name: 
						
				</small>
					<h2 class="m-t-0" ng-if="!taxon.FunIndexNumber"> 
						<md-tooltip >
						             {{ 'The full canonical name without author, but with moderators such as s. lato' | translate}}
						            </md-tooltip>
						<a href="#" editable-text="taxon.FullName"  onaftersave="taxon.$update()"><em>{{ taxon.FullName }}</em></a> </h2>
				
					
						<small ng-if="!taxon.FunIndexNumber" translate>Taxon Name / epithet: </small>
						<h4  class="m-t-0" ng-if="!taxon.FunIndexNumber"> 
							<md-tooltip>
							              {{'Epithet for bi- and trinominal names. For higher taxa equal to Full Name' | translate}}
							            </md-tooltip>
							<a href="#" editable-text="taxon.TaxonName"  onaftersave="taxon.$update()"><em>{{ taxon.TaxonName }}</em></a></h4>
						<small ng-if="!taxon.FunIndexNumber" translate>Author: </small>
						<h4 class="m-t-0" ng-if="!taxon.FunIndexNumber"> <a href="#" editable-text="taxon.Author"  onaftersave="taxon.$update()"><em>{{ taxon.Author || 'n/a'}}</em></a></h4>
				
				
				</div>
			<div ng-class="{'col-md-12': taxon.FunIndexNumber,'col-md-6': !taxon.FunIndexNumber }"   >
				
			
				
			<h2><span ng-show="taxon._id === undefined || taxon.FunIndexNumber"><em>{{taxon.FullName}}</em> {{taxon.Author}}</span>
				
				<button class="btn btn-lg btn-primary" ng-show="taxon._id === undefined" ng-disabled="!taxon || (saveIsClicked || taxon.Parent === null || taxon.morphogroup_id === undefined)" ng-click="saveNewTaxon(taxon)" translate>Save taxon <i ng-show="saveIsClicked" class="fa fa-spinner fa-spin"></i></button> <button class="btn btn-danger" ng-show="taxon._id !== undefined && (taxon._id === taxon.accepted_id || taxon.accepted_id === null)" ng-click="synonymModal.show()" tabindex="0" translate>Make into synonym</button>
<button class="btn btn-lg btn-primary" ng-show="taxonAttributesUnsaved === true"  ng-click="Taxon.updateAttributes({id: taxon._id}, taxon.attributes); taxonAttributesUnsaved = false;">Save attributes</button> <button class="btn btn-lg btn-primary" ng-show="taxonAttributesUnsaved === true"  ng-click="taxon = Taxon.get({id: taxon._id}); taxonAttributesUnsaved = false;">Discard imported attributes</button>	
<button class="btn btn-primary"  ng-click="$state.go('species',{id: taxon._id})">{{'Svampebog' | translate}}</button>	
			</h2>
			

			<div class="alert alert-warning" role="alert" ng-show="taxon.acceptedTaxon && taxon.acceptedTaxon._id !== taxon._id"><strong>Synonym of: </strong><a href="/taxonbase/taxon/{{taxon.acceptedTaxon._id}}"> {{taxon.acceptedTaxon.FullName}}</a>  <button class="btn btn-xs btn-danger pull-right"  ng-click="unlinkSynonym()" tabindex="0">Unlink synonym</button></div>
			<div class="alert alert-danger col-md-12" role="alert" ng-show="taxon.parent_id === null"><strong>Orphant taxon! </strong> Please add parent Taxon in the actions menu on the right. 

			</div>
			
			<h4 ng-show="taxon._id !== undefined"><strong translate>DK name: </strong> <em>{{ taxon.Vernacularname_DK.vernacularname_dk || 'n/a' }}</em> </h4> 
		<div  ng-show="taxon._id && taxon.RankID > 5000" layout="row" >
    <md-checkbox  ng-model="taxon.attributes.PresentInDK" ng-change="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
	{{'Present in DK' | translate}}
  </md-checkbox>
    <md-checkbox  ng-model="taxon.attributes.atlasart" ng-change="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
	{{'Atlasart' | translate}}
  </md-checkbox>
</div>
			
			
			<p><small><em ng-class="{'text-danger' : taxon.SystematicPath.indexOf(taxon.FunIndexRecord.SystematicPath) == '-1'}">{{taxon.SystematicPath}}</em></small></p>
			<p><small><strong translate>Taxon rank: </strong><em ng-class="{'text-danger' : taxon.RankName !== taxon.FunIndexRecord.INFRASPECIFIC_x0020_RANK}"> {{taxon.RankName}}</em></small> <button ng-show="taxon._id !== undefined && taxon._id === taxon.accepted_id && (taxon.RankName === 'sp.' || taxon.RankName === 'gen.')" class="btn btn-xs btn-danger"   ng-click="rankModal.show()">{{'Raise rank to' | translate}} {{superrank | translate}}</button>
			<button ng-show="taxon._id !== undefined && ((taxon.RankID < 10000 &&  taxon.RankID > 5000)|| (taxon.RankID > 4000 &&  taxon.RankID < 5000))" class="btn btn-xs btn-danger"   ng-click="rankModal.show()">Change rank level</button>
			</p>
			</div>
			<div class="col-md-4" >
				
			</div>
			</div>

<div class="row" ng-show="!fetchingTaxon" ng-cloak>
	
	
			<div class="col-md-6" ng-show="taxon._id !== undefined">
				<p ng-if="taxon && taxon._id !== undefined && 5000 === taxon.RankID"><span translate>Number of species recorded in Denmark: </span> {{numberOfDanishSpecies}}</p>
	<highchart id="chart1" config="chartOptions" ng-if="taxon && taxon._id !== undefined && 5000 > taxon.RankID"></highchart>
	
					<label class="control-label" for="diagnose">Diagnose</label>
			<a href="#" id="diagnose" editable-textarea="taxon.attributes.diagnose" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
			    <div class="x-editable-texarea">{{ taxon.attributes.diagnose || 'n/a' }}</div>
			  </a>
			  <label class="control-label" for="forvekslingsmuligheder">Forvekslingsmuligheder</label>
			  <a href="#" id="forvekslingsmuligheder" editable-textarea="taxon.attributes.forvekslingsmuligheder" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
			      <div class="x-editable-texarea">{{ taxon.attributes.forvekslingsmuligheder || 'n/a' }}</div>
			    </a>
				 <label class="control-label" for="beskrivelse">Beskrivelse</label>
			    <a href="#" id="beskrivelse" editable-textarea="taxon.attributes.beskrivelse" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
			        <div class="x-editable-texarea">{{ taxon.attributes.beskrivelse || 'n/a' }}</div>
			      </a>
				   <label class="control-label" for="oekologi">Økologi</label>
			      <a href="#" id="oekologi" editable-textarea="taxon.attributes.oekologi" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
			          <div class="x-editable-texarea">{{ taxon.attributes.oekologi || 'n/a' }}</div>
			        </a>
					 <label class="control-label" for="bemaerkning">Note (ekstern)</label>
			        <a href="#" id="bemaerkning" editable-textarea="taxon.attributes.bemaerkning" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
			            <div class="x-editable-texarea">{{ taxon.attributes.bemaerkning || 'n/a' }}</div>
			          </a>
		  
		  
					<p><strong>År for første fund i DK: </strong> <a href="#" editable-text="taxon.attributes.foersteFundIDK" onbeforesave="isValidYear($data)" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">{{ taxon.attributes.foersteFundIDK || 'n/a' }}</a> </p>
					
					<p ng-if="firstfinding">Første fund i basen: <a ng-click="ObservationModalService.show(null, firstfinding)">{{(firstfinding && firstfinding.observationDateAccuracy === 'day') ? (firstfinding.observationDate | date : 'dd/MM/yyyy') : getDate(firstfinding.observationDate, firstfinding.observationDateAccuracy)}}</a></p>
					<p ng-if="latestfinding">Seneste fund i basen: <a ng-click="ObservationModalService.show(null, latestfinding)">{{(latestfinding && latestfinding.observationDateAccuracy === 'day') ? (latestfinding.observationDate | date : 'dd/MM/yyyy') : getDate(latestfinding.observationDate, latestfinding.observationDateAccuracy)}}</a></p>
					
					<p><strong>År for første DK-reference: </strong><a href="#" editable-text="taxon.attributes.foersteReferenceForDK" onbeforesave="isValidYear($data)" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">{{ taxon.attributes.foersteReferenceForDK || 'n/a' }}</a></p>
		
					 <label class="control-label" for="DK_reference">DK referencer</label>
			        <a href="#" id="DK_reference" editable-textarea="taxon.attributes.DK_reference" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
			            <div class="x-editable-texarea">{{ taxon.attributes.DK_reference || 'n/a' }}</div>
			          </a>
 					 <label class="control-label" for="internalNote">Intern note</label>
 			        <a href="#" id="internalNote" editable-textarea="taxon.attributes.internalNote" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
 			            <div class="x-editable-texarea">{{ taxon.attributes.internalNote || 'n/a' }}</div>
 			          </a>
		
			</div>
			
			<div class="col-md-6"  ng-if="stateParams.id">
				
				
				
				
				<div class="panel-group" role="tablist" aria-multiselectable="true" ng-model="activePanel"  bs-collapse>
		    	  <!-- ########################################-->
		    	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
		    	    <div class="panel-heading" role="tab">
		    	      <h4 class="panel-title">
		    	        <a bs-collapse-toggle>
		    	       <i class="fa fa-exclamation-triangle text-danger" ng-show=" taxon.Parent === null "></i>   {{'Validation' | translate}}
		    	        </a>
		    	      </h4>
		    	    </div>
		    	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
		    	      <div class="panel-body">
		  				<md-radio-group ng-model="taxon.attributes.valideringskrav" ng-change="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
		  				      <md-radio-button value="2" class="md-primary">Valideres</md-radio-button>
		  				      <md-radio-button value="1">Valideres fra nye lokaliteter </md-radio-button>
		  				      <md-radio-button value="0">ingen validering</md-radio-button>
		  				    </md-radio-group>
				
		  				 <label class="control-label" for="internalNote">valideringsrapport</label>
		  		        <a href="#" id="internalNote" editable-textarea="taxon.attributes.valideringsrapport" e-rows="7" e-cols="40" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
		  		            <div class="x-editable-texarea">{{ taxon.attributes.valideringsrapport || 'n/a' }}</div>
		  		          </a>
		    	      </div>
		    	    </div>
		    	  </div>
		    	  <!-- ########################################-->
		    	  <!-- ########################################-->
		    	  <div class="panel panel-default">
		    	    <div class="panel-heading" role="tab">
		    	      <h4 class="panel-title">
		    	        <a bs-collapse-toggle>
		    	       <i class="fa fa-exclamation-triangle text-danger" ng-show="!taxon.morphogroup_id"></i>   {{'Morpho group' | translate}}
		    	        </a>
		    	      </h4>
		    	    </div>
		    	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
		    	      <div class="panel-body">
	    			   <md-input-container>
	    			           <label>{{'Morpho group' | translate}}</label>
	    			           <md-select name="MorphoGroups" ng-model="taxon.morphogroup_id" ng-change="Taxon.update({id: taxon._id}, taxon)">
  
	    	   				             <md-option ng-repeat="mg in morphoGroup"  value="{{mg._id}}" >
	    	   				               {{mg.name_dk}} 
	    	   				             </md-option>
			 

	    			           </md-select>

	    			         </md-input-container>
		    	      </div>
		    	    </div>
		    	  </div>
		    	  <!-- ########################################-->
			    	  <!-- ########################################-->
			    	  <div class="panel panel-default">
			    	    <div class="panel-heading" role="tab">
			    	      <h4 class="panel-title">
			    	        <a bs-collapse-toggle>
			    	       <i class="fa fa-exclamation-triangle text-danger" ng-show=" taxon.Parent === null "></i>   {{'Parent taxon' | translate}}
			    	        </a>
			    	      </h4>
			    	    </div>
			    	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			    	      <div class="panel-body">
							  <div class="alert alert-warning" role="alert" ng-show="taxon._id === undefined && taxon.Parent !== null && selectedParentTaxon === undefined"><strong>{{'Suggested parent taxon' | translate}}.</strong> {{'Please review this and change it if neccesary' | translate}}.</div>
							  <div class="alert alert-danger" role="alert" ng-show="taxon._id === undefined && taxon.Parent === null"><strong>{{'No parent taxon selected' | translate}}.</strong> {{'Please select a parent taxon before saving' | translate}}.</div>
							  
							  <button class="btn btn-danger" ng-show=" taxon.Parent === null " ng-click="parentModal.show()">{{'Set parent taxon' | translate}}</button>
								<table ng-show=" taxon.Parent !== null " class="table table-bordered">

								  <tr class="table-bordered"><td class="table-bordered" st-ratio="20">{{'Full taxon name' | translate}}:</td><td class="table-bordered" st-ratio="30"><a href="/taxonbase/taxon/{{taxon.Parent._id}}">{{ taxon.Parent.FullName}}</a></td><td st-ratio="50"><button class="btn btn-danger" ng-click="parentModal.show()" translate>Change parent taxon</button></td></tr>
								  <tr class="table-bordered"><td class="table-bordered" st-ratio="20">{{'Epithet' | translate}} :</td><td class="table-bordered" st-ratio="30">{{ taxon.Parent.TaxonName}}</td><td st-ratio="50"></td></tr>
								  <tr class="table-bordered"><td class="table-bordered" st-ratio="20">{{'Author(s)' | translate}}:</td><td class="table-bordered" st-ratio="30"><i>{{ taxon.Parent.Author}}</i></td><td st-ratio="50"></td></tr>
								  <tr ng-show=" taxon.Parent !== null " class="table-bordered"><td class="table-bordered" st-ratio="20">{{'Taxon rank' | translate}}:</td><td class="table-bordered" st-ratio="30">{{ taxon.Parent.RankName}}</td><td st-ratio="50"></td></tr>
				
								</table>
			    	      </div>
			    	    </div>
			    	  </div>
			    	  <!-- ########################################-->
			    	  <!-- ########################################-->
			    	  <div class="panel panel-default" ng-show="taxon.Children.length > 0">
			    	    <div class="panel-heading" role="tab">
			    	      <h4 class="panel-title">
			    	        <a bs-collapse-toggle>
			    	          {{'Child taxa' | translate}} ({{numAcceptedChildren}} {{'accepted' | translate}}. {{numSynChildren}} {{'synonyms' | translate}})
			    	        </a>
			    	      </h4>
			    	    </div>
			    	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			    	      <div class="panel-body">
							
 							
							<table class="table table-bordered">
							  	
								<tbody>
 							  <tr ng-repeat="child in taxon.Children | orderBy : 'FullName'"><td class="table-bordered" st-ratio="80"><a href="/taxonbase/taxon/{{child._id}}" ng-class="{'text-muted' : child.accepted_id !== null && child.accepted_id !== child._id}">{{child.FullName}}</a> 
							  </td><td st-ratio="20">
								  
								  <md-checkbox ng-show="child.RankID > 5000 && child._id === child.accepted_id" ng-model="child.attributes.PresentInDK" ng-change="setDkPresence(child)"> DK</md-checkbox> </td></tr></tbody>
 							</table>
							
			    	      </div>
			    	    </div>
			    	  </div>
			    	  <!-- ########################################-->
			    	  <!-- ########################################-->
			    	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
			    	    <div class="panel-heading" role="tab">
			    	      <h4 class="panel-title">
			    	        <a bs-collapse-toggle>
			    	          {{'Mycokey characters' | translate}} ({{taxon.character1.length}})
			    	        </a>
							<img src="assets/images/MycoKey.gif" width="24" class="pull-right" alt="MycoKey">
			    	      </h4>
			    	    </div>
			    	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			    	      <div class="panel-body">
							<div style="margin-bottom: 20px">  <button class="btn btn-danger"  ng-click="mycokeyImportModal.show()">{{'Import mycokey characters from taxon' | translate}}</button> </div>
						<div class="panel-group"  role="tablist" aria-multiselectable="true" bs-collapse>
						  <div class="panel panel-default" ng-repeat="group in mycokeyGroups">
						    <div class="panel-heading" role="tab">
						      <h4 class="panel-title">
						        <a bs-collapse-toggle>
						          {{ ($translate.use() === 'en') ? group['Full text UK'] : group['Full text DK'] }}
						        </a>
						      </h4>
						    </div>
						    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
						      <div class="panel-body">
								<table class="table table-bordered">
							  	
																<tbody>
								 							  <tr ng-repeat="character in mycokeyCharacters | filter:{ CharacterGroup : group.CharacterGroupID }:true"><td class="table-bordered" st-ratio="{{(character.Type === 'Bool') ? 80 : 60}}">{{ ($translate.use() === 'en') ? character['Short text UK'] : character['Short text DK']}}
															  </td><td st-ratio="20" ng-if="character.Type === 'Bool'">
								  
																  <md-checkbox aria-label="character['Short text DK']" ng-model="mycokeyMap[character.CharacterID].isChecked" ng-change="updateMycoKeyCharacter(character.CharacterID)"></md-checkbox> </td>
																  <td st-ratio="20" ng-if="character.Type === 'Real'">
								  <!-- <md-checkbox aria-label="character['Short text DK']" ng-model="mycokeyMap[character.CharacterID].isChecked" ng-change="updateMycoKeyCharacter(character.CharacterID)"></md-checkbox> -->
				    	     <md-input-container >
				    	             <label>Min {{'value' | translate}} ({{character.Unit}})</label>
				    	            <input  ng-change="updateMycoKeyCharacter(character.CharacterID)" type="number" ng-model="mycokeyMap[character.CharacterID].RealValueMin">

				    	           </md-input-container>
							   </td>  <td st-ratio="20" ng-if="character.Type === 'Real'">
					    	     <md-input-container >
					    	             <label>Max {{'value' | translate}} ({{character.Unit}})</label>
					    	            <input ng-change="updateMycoKeyCharacter(character.CharacterID)" type="number" ng-model="mycokeyMap[character.CharacterID].RealValueMax">

					    	           </md-input-container>
							   </td>
															  
															  </tr></tbody>
								 							</table>
						      </div>
						    </div>
						  </div>
						</div>
						
 							
						<!--	<table class="table table-bordered">
							  	
								<tbody>
 							  <tr ng-repeat="(key, value) in mycokeyMap"><td class="table-bordered" st-ratio="80">{{value['Short text DK']}}
							  </td><td st-ratio="20">
								  
								  <md-checkbox  ng-model="value.isChecked" ng-change="updateMycoKeyCharacter(key)"></md-checkbox> </td></tr></tbody>
 							</table> -->
							
			    	      </div>
			    	    </div>
			    	  </div>
			    	  <!-- ########################################-->
				  	  <!-- ########################################-->
				  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
				  	    <div class="panel-heading" role="tab">
				  	      <h4 class="panel-title">
				  	        <a bs-collapse-toggle>
				  	         <i class="fa fa-exclamation-triangle text-danger" ng-show="taxon.FunIndexRecord.CURRENT_x0020_NAME_x0020_RECORD_x0020_NUMBER !== taxon.FunIndexRecord.RECORD_x0020_NUMBER || taxon.SystematicPath.indexOf(taxon.FunIndexRecord.SystematicPath) == '-1' || taxon.Author !== taxon.FunIndexRecord.AUTHORS"></i>  Index fungorum link
				  	        </a> <img src="assets/images/LogoIF.gif" width="24" class="pull-right" alt="Index Fungorum">
				  	      </h4>
				  	    </div>
				  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
				  	      <div class="panel-body">
							  <div class="alert alert-warning" role="alert" ng-show="FunIndexError">{{FunIndexError}}</div>
							 <button class="btn btn-danger" ng-click="funIndexModal.show()" ng-show="!taxon.FunIndexRecord">Attach FunIndex record</button> 
							<table ng-show="taxon.FunIndexRecord" class="table table-bordered">
							  	<thead>
							  	<tr class="table-bordered" width="100%">
									
							  		<th st-ratio="80" colspan="2"></th>
									<th st-ratio="20" > 
									<button class="btn btn-danger" ng-click="detachFromFunRecord()">{{'Detach' | translate}} FunIndex record</button>
								</th>
							  	</tr>
							  
							  	</thead>
								<tbody>
							  <tr class="table-bordered"><td class="table-bordered" st-ratio="20">Name of fungus:</td><td class="table-bordered" st-ratio="50"><a href="http://www.indexfungorum.org/Names/NamesRecord.asp?RecordID={{taxon.FunIndexRecord.RECORD_x0020_NUMBER}}" target="_BLANK">{{ taxon.FunIndexRecord.NAME_x0020_OF_x0020_FUNGUS}} </a> {{taxon.FunIndexRecord.YEAR_x0020_OF_x0020_PUBLICATION}}</td>
							  <td st-ratio="30"><button class="btn btn-danger" ng-click="funIndexModal.show()" ng-show="possibleToChangeFunRecord()">{{'Change' | translate}} FunIndex record</button> 
							  <em ng-show="!possibleToChangeFunRecord() && (taxon.RankName === 'superspecies' || taxon.RankName === 'supergenus')" class="text-danger">Change of FunIndex record not possible because this super taxon has children.</em>
							  </tr>
							 
							  <tr class="table-bordered" ng-if="taxon.FunIndexRecord.CURRENT_x0020_NAME_x0020_RECORD_x0020_NUMBER !== taxon.FunIndexRecord.RECORD_x0020_NUMBER"><td class="table-bordered" st-ratio="20">Current name:</td><td class="table-bordered" st-ratio="50"><a href="http://www.indexfungorum.org/Names/NamesRecord.asp?RecordID={{taxon.FunIndexRecord.CURRENT_x0020_NAME_x0020_RECORD_x0020_NUMBER}}" target="_BLANK">{{ taxon.FunIndexRecord.CURRENT_x0020_NAME}} </a></td><td st-ratio="30"> <em class="text-danger">This is the current valid name according to Index Fungorum!</em></td></tr>
						
						
						<tr class="table-bordered" ng-if="taxon.FunIndexBasionymRecord"><td class="table-bordered" st-ratio="20">Basionym:</td><td class="table-bordered" st-ratio="50"><a href="http://www.indexfungorum.org/Names/NamesRecord.asp?RecordID={{taxon.FunIndexBasionymRecord.RECORD_x0020_NUMBER}}" target="_BLANK">{{ taxon.FunIndexBasionymRecord.NAME_x0020_OF_x0020_FUNGUS}} {{taxon.FunIndexBasionymRecord.AUTHORS}}</a> {{ taxon.FunIndexBasionymRecord.YEAR_x0020_OF_x0020_PUBLICATION}} <span ng-if="taxon.FunIndexBasionymRecord.pubAcceptedTitle"><br><em ng-if="taxon.FunIndexBasionymRecord.pubAcceptedTitle">{{ taxon.FunIndexBasionymRecord.pubAcceptedTitle}}</em> <span ng-if="taxon.FunIndexBasionymRecord.VOLUME">{{taxon.FunIndexBasionymRecord.VOLUME}}: {{taxon.FunIndexBasionymRecord.PAGE}}</span></span></td><td st-ratio="30" class="table-bordered">
							
							 <label class="control-label" for="basionym_described">Saved basionym year: </label>
					        <a href="#" id="fn_temperate" editable-text="taxon.attributes.basionym_described" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
					            {{ taxon.attributes.basionym_described || 'n/a' }}
					          </a>
							
						</td></tr>	  
							  
							  
							  <tr class="table-bordered"><td class="table-bordered" st-ratio="20">Classification:</td><td class="table-bordered" st-ratio="80" colspan="2"><small><em ng-class="{'text-danger' : taxon.SystematicPath.indexOf(taxon.FunIndexRecord.SystematicPath) == '-1'}">{{ taxon.FunIndexRecord.SystematicPath}}</em></small></td></tr>
							  <tr class="table-bordered"><td class="table-bordered" st-ratio="20">Author(s):</td><td class="table-bordered" st-ratio="30"><em ng-class="{'text-danger' : taxon.Author !== taxon.FunIndexRecord.AUTHORS}">{{ taxon.FunIndexRecord.AUTHORS}}</em></td><td st-ratio="50" colspan="2"></td></tr>
							  <tr ng-show=" taxon.Parent !== null " class="table-bordered"><td class="table-bordered" st-ratio="20">Taxon rank:</td><td class="table-bordered" st-ratio="30"><span ng-class="{'text-danger' : taxon.RankName !== taxon.FunIndexRecord.INFRASPECIFIC_x0020_RANK}">{{ taxon.FunIndexRecord.INFRASPECIFIC_x0020_RANK}}</span></td><td st-ratio="50"></td></tr>
			</tbody>
							</table>
			  	        
							<!--<ul>
								<li ng-repeat="syn in taxon.synonyms| synonymsWithoutSelf"><a href="/taxonbase/taxon/{{syn._id}}">{{syn.FullName}}</a></li>
							</ul> -->
				  	      </div>
				  	    </div>
				  	  </div>
				  	  <!-- ########################################-->
								  	  <!-- ########################################-->
								  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
								  	    <div class="panel-heading" role="tab">
								  	      <h4 class="panel-title">
								  	        <a bs-collapse-toggle>
								  	          Dyntaxa <img src="assets/images/slu-logo-svart-web.png" width="27" class="pull-right" alt="Unite">
								  	        </a>
								  	      </h4>
								  	    </div>
								  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
								  	      <div class="panel-body">
							  
										<div ><button class="btn btn-primary" ng-click="getInfoFromDyntaxa()">Get Taxon names from Dyntaxa </button></div>
										<div ng-show="dyntaxa !== undefined && dyntaxa.loading === true"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div >
											<md-content layout-padding layout="column" layout="center center">
					  					<p ng-show="dyntaxa.noMatch">No match on {{taxon.FullName}}	in Dyntaxa.</p> 
						  			  	<p ng-show="dyntaxa.vernacularname_se"><strong>Current swedish name:</strong> {{dyntaxa.vernacularname_se}}</p>
										<p ng-show="dyntaxa.classification"> <strong>Classification:</strong><br><small>{{dyntaxa.classification}}</small></p>
					  						 </md-content>
											  <table class="table table-bordered" ng-show="dyntaxa.latinnames && dyntaxa.latinnames.length >0">
												  
												  <tr><th st-ratio="30">Name</th><th st-ratio="60">Description</th><th st-ratio="10">Status</th>
												  
												  </tr>
					  							   <tr ng-repeat="dtn in dyntaxa.latinnames "><td st-ratio="30">
					  						 <a href="https://www.dyntaxa.se/Taxon/Info/{{dtn['b:Taxon'][0]['b:Id'][0]}}" target="_BLANK"><em>{{dtn['b:Name'][0]}}</em> {{dtn['b:Author'][0]}}</a> 
										</td>	<td st-ratio="60"> <small>{{dtn['b:Description'][0]}} <br ng-if="dtn['b:Description'][0] !==''"> {{dyntaxa.getStatus(dtn)}}</small>
					  						  </td><td st-ratio="10">
					  						  	<strong>{{dyntaxa.currentUse(dtn)}}</strong>
					  						  </td>
										  
													
										  </tr>
										  </table>
			  	        
											<!--<ul>
												<li ng-repeat="syn in taxon.synonyms| synonymsWithoutSelf"><a href="/taxonbase/taxon/{{syn._id}}">{{syn.FullName}}</a></li>
											</ul> -->
								  	      </div>
								  	    </div>
								  	  </div>
								  	  <!-- ########################################-->
				  	  <!-- ########################################-->
				  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
				  	    <div class="panel-heading" role="tab">
				  	      <h4 class="panel-title">
				  	        <a bs-collapse-toggle>
				  	          Unite Species Hypothesis ({{taxon.specieshypothesis.length}}) <img src="assets/images/unitelogo3.png" width="48" class="pull-right" alt="Unite">
				  	        </a>
				  	      </h4>
				  	    </div>
				  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
				  	      <div class="panel-body">
							  
								<div class="col-md-8"> 
								  <md-input-container style="width:70%">
            <label>Enter species hypothesis</label>
            <input ng-model="newSpeciesHypothesis" ng-focus="newSpeciesHypothesis = '';">
			
          </md-input-container>
	  </div><div class="col-md-2"><button class="btn btn-danger" ng-disabled="!newSpeciesHypothesis" ng-click="addSpeciesHypothesis(newSpeciesHypothesis); newSpeciesHypothesis = '';"><i class="fa fa-plus"> </i>Add </button></div>
	  						  <table class="table table-bordered" ng-show="taxon.specieshypothesis && taxon.specieshypothesis.length > 0"> 
								  <tr><th st-ratio="100">Species hypotheses in our database:</th>
								  </tr>
	  							   <tr ng-repeat="sh in taxon.specieshypothesis"><td st-ratio="70">
	  						 <a href="https://unite.ut.ee/sh/{{sh.specieshypothesis}}" target="_BLANK">{{sh.specieshypothesis}}</a>
	  						  </td>
						  <td st-ratio="30">
						    					<a ng-click="deleteSpeciesHypothesis(sh)" class="trash" tabindex="0"><span class="glyphicon glyphicon-trash pull-right"></span></a>
						    						  </td>
													
						  </tr>
						  </table>
						  
	  						  <table class="table table-bordered" ng-show="specieshypotheses && specieshypotheses.length >0">
								  <tr><th st-ratio="100">Possible matches from Unite:</th></tr>
								  <tr><th st-ratio="25">Name</th><th st-ratio="25">Threshold</th><th st-ratio="25">Designators</th>
								  <th st-ratio="25"><img src="assets/images/unitelogo3.png" width="48" class="pull-right" alt="Unite"></th>
								  </tr>
	  							   <tr ng-repeat="sh in specieshypotheses | orderBy:'-version'"><td st-ratio="25">
	  						 <a href="https://unite.ut.ee/sh/{{sh.name}}" target="_BLANK">{{sh.name}}</a>
	  						  </td><td st-ratio="25">{{sh.threshold}}</td><td st-ratio="25">{{sh.designators.toString()}}</td>
						  <td st-ratio="25">
						    					<a ng-click="saveSpeciesHypothesisToSvampeatlas(sh)"  tabindex="0"><span class="glyphicon glyphicon-plus pull-right"></span></a>
						    						  </td>
													
						  </tr>
						  </table>
			  	        
							<!--<ul>
								<li ng-repeat="syn in taxon.synonyms| synonymsWithoutSelf"><a href="/taxonbase/taxon/{{syn._id}}">{{syn.FullName}}</a></li>
							</ul> -->
				  	      </div>
				  	    </div>
				  	  </div>
				  	  <!-- ########################################-->
			  	  <!-- ########################################-->
			  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
			  	    <div class="panel-heading" role="tab">
			  	      <h4 class="panel-title">
			  	        <a bs-collapse-toggle>
			  	          Synonyms ({{filteredSynonyms.length}})
			  	        </a>
			  	      </h4>
			  	    </div>
			  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			  	      <div class="panel-body">
  						  <table class="table table-bordered">
  							   <tr ng-repeat="syn in taxon.synonyms | synonymsWithoutSelf as filteredSynonyms"><td st-ratio="70">
  						 <a href="/taxonbase/taxon/{{syn._id}}">{{syn.FullName}}</a>
  						  </td>
					  <td st-ratio="13">
					    						<button class="btn btn-sm btn-danger" ng-click="mergeWithSynTaxon(syn)" data-html=true data-title="{{mergetooltip.title}}" bs-tooltip>Merge</button>
					    						  </td>
												  <td st-ratio="17">
												    						<button class="btn btn-sm btn-danger" ng-click="overWriteFromSynTaxon(syn)" data-html=true data-title="{{overwritetooltip.title}}" bs-tooltip>Overwrite</button>
												    						  </td>
					  </tr>
					  </table>
			  	        
						<!--<ul>
							<li ng-repeat="syn in taxon.synonyms| synonymsWithoutSelf"><a href="/taxonbase/taxon/{{syn._id}}">{{syn.FullName}}</a></li>
						</ul> -->
			  	      </div>
			  	    </div>
			  	  </div>
			  	  <!-- ########################################-->
			  	  <!-- ########################################-->
			  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
			  	    <div class="panel-heading" role="tab">
			  	      <h4 class="panel-title">
			  	        <a bs-collapse-toggle>
			  	          {{'Similar Taxa' | translate}} ({{taxon.similarTaxa.length}})
			  	        </a>
			  	      </h4>
			  	    </div>
			  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			  	      <div class="panel-body">
						  <md-button  ng-show="taxon._id !== undefined && (taxon._id === taxon.accepted_id || taxon.accepted_id === null)" ng-click="SimilarTaxaModalService.show($event, taxon)" tabindex="0" >{{'Add similar taxon' | translate}}</md-button>
  						  <table class="table table-bordered">
  							   <tr ng-repeat="simTax in taxon.similarTaxa "><td st-ratio="60">
  						 <a ng-href="/taxonbase/taxon/{{(simTax.taxon1_id === taxon._id) ? simTax.taxon2_id : simTax.taxon1_id}}">{{(simTax.taxon1_id === taxon._id) ? simTax.Taxon2.FullName : simTax.Taxon1.FullName}}</a>
  						  </td>
					  <td st-ratio="400">
					    						 <button class="btn btn-sm btn-danger" ng-click="deleteSimilarTaxon(simTax)"  >Delete</button>
				  						        
					    						  </td>
												 
					  </tr>
					  </table>
			  	        
						<!--<ul>
							<li ng-repeat="syn in taxon.synonyms| synonymsWithoutSelf"><a href="/taxonbase/taxon/{{syn._id}}">{{syn.FullName}}</a></li>
						</ul> -->
			  	      </div>
			  	    </div>
			  	  </div>
			  	  <!-- ########################################-->
			  	  <!-- ########################################-->
			  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
			  	    <div class="panel-heading" role="tab">
			  	      <h4 class="panel-title">
			  	        <a bs-collapse-toggle>
			  	          {{'Nature types' | translate}} ( {{taxon.naturtyper.length}} )
			  	        </a>
			  	      </h4>
			  	    </div>
			  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			  	      <div class="panel-body">
						  
						 <div ng-repeat="natureType in natureTypes">
							 
						     
						        <md-checkbox type="checkbox"  ng-model="natureType.isChecked"  id="{{natureType._id}}" ng-change="addOrRemoveNatureType(natureType)">
						        {{natureType.name}}
						      </md-checkbox>
						    </div>
			  	      </div>
			  	    </div>
			  	  </div>
			  	  <!-- ########################################-->
			  	  <!-- ########################################-->
			  	  <div class="panel panel-default" ng-if="taxon._id !== undefined && taxonomyTags.length > 0">
			  	    <div class="panel-heading" role="tab">
			  	      <h4 class="panel-title">
			  	        <a bs-collapse-toggle>
			  	          {{'Tags' | translate}} ( {{taxon.tags.length}} )
			  	        </a>
			  	      </h4>
			  	    </div>
			  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			  	      <div class="panel-body">
						  
						 <div ng-repeat="tag in taxonomyTags">
							 
						     
						        <md-switch  ng-model="tag.isChecked"  ng-change="addOrRemoveTag(tag)">
						        {{tag.tagname}}
						      </md-switch>
						    </div>
			  	      </div>
			  	    </div>
			  	  </div>
			  	  <!-- ########################################-->
			  	  <!-- ########################################-->
			  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
			  	    <div class="panel-heading" role="tab">
			  	      <h4 class="panel-title">
			  	        <a bs-collapse-toggle>
			  	          Danish names ({{taxon.DanishNames.length}})
			  	        </a>
			  	      </h4>
			  	    </div>
			  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			  	      <div class="panel-body">
						  <button class="btn btn-danger" ng-show="taxon._id !== undefined && (taxon._id === taxon.accepted_id || taxon.accepted_id === null)" ng-click="createNewDkName()" tabindex="0" translate>Add danish name</button>
  						  <table class="table table-bordered">
  							   <tr ng-repeat="name in taxon.DanishNames "><td st-ratio="60">
  						 <a href="#" ng-click="updateDkName(name)">{{name.vernacularname_dk}}</a>
  						  </td>
					  <td st-ratio="400">
					    						<button class="btn btn-sm btn-danger" ng-disabled="newDkNameIsInProgress" ng-click="setCurrentDkName(name)" ng-if="name._id !== taxon.Vernacularname_DK._id" >Set as current</button> <button class="btn btn-sm btn-danger" ng-disabled="newDkNameIsInProgress" ng-click="deleteDkName(name)" ng-if="name._id !== taxon.Vernacularname_DK._id" >Delete</button>
				  						        <md-checkbox type="checkbox" ng-if="name._id === taxon.Vernacularname_DK._id" ng-checked="true" ng-click="setCurrentDkName(null)">
				  						        Current use
				  						      </md-checkbox>
					    						  </td>
												 
					  </tr>
					  </table>
			  	        
						<!--<ul>
							<li ng-repeat="syn in taxon.synonyms| synonymsWithoutSelf"><a href="/taxonbase/taxon/{{syn._id}}">{{syn.FullName}}</a></li>
						</ul> -->
			  	      </div>
			  	    </div>
			  	  </div>
			  	  <!-- ########################################-->
			  	  <!-- ########################################-->
			  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
			  	    <div class="panel-heading" role="tab">
			  	      <h4 class="panel-title">
			  	        <a bs-collapse-toggle>
			  	          Distribution
			  	        </a>
			  	      </h4>
			  	    </div>
			  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			  	      <div class="panel-body">
						  <table class="table table-bordered">
							   <tr ><td st-ratio="100">
						 <label class="control-label" for="fn_temperate">fn_temperate: </label>
				        <a href="#" id="fn_temperate" editable-text="taxon.attributes.fn_temperate" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
				            {{ taxon.attributes.fn_temperate || 'n/a' }}
				          </a>
						  </td></tr>
						  <tr><td  st-ratio="100">
  						 <label class="control-label" for="fn_hemiboreal">fn_hemiboreal: </label>
  				        <a href="#" id="fn_hemiboreal" editable-text="taxon.attributes.fn_hemiboreal" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
  				            {{ taxon.attributes.fn_hemiboreal || 'n/a' }}
  				          </a>
						   </td></tr>
   						  <tr><td  st-ratio="100">
     						 <label class="control-label" for="fn_boreal">fn_boreal: </label>
     				        <a href="#" id="fn_boreal" editable-text="taxon.attributes.fn_boreal" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
     				            {{ taxon.attributes.fn_boreal || 'n/a' }}
     				          </a>
   						   </td></tr>
    						  <tr><td  st-ratio="100">
      						 <label class="control-label" for="fn_subarctic_alpine">fn_subarctic_alpine: </label>
      				        <a href="#" id="fn_subarctic_alpine" editable-text="taxon.attributes.fn_subarctic_alpine" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
      				            {{ taxon.attributes.fn_subarctic_alpine || 'n/a' }}
      				          </a>
    						   </td></tr>
       						  <tr><td  st-ratio="100">
         						 <label class="control-label" for="fn_arctic_alpine">fn_arctic_alpine: </label>
         				        <a href="#" id="fn_arctic_alpine" editable-text="taxon.attributes.fn_arctic_alpine" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
         				            {{ taxon.attributes.fn_arctic_alpine || 'n/a' }}
         				          </a>
       						   </td></tr>
        						  <tr><td  st-ratio="100">
          						 <label class="control-label" for="fn_comment">fn_comment: </label>
          				        <a href="#" id="fn_comment" editable-text="taxon.attributes.fn_comment" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
          				            {{ taxon.attributes.fn_comment || 'n/a' }}
          				          </a>
        						   </td></tr>
           						  <tr><td  st-ratio="100">
             						 <label class="control-label" for="North_of_DK">North_of_DK: </label>
             				        <a href="#" id="North_of_DK" editable-text="taxon.attributes.North_of_DK" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
             				            {{ taxon.attributes.North_of_DK || 'n/a' }}
             				          </a>
           						   </td></tr>
            						  <tr><td  st-ratio="100">
              						 <label class="control-label" for="South_of_DK">South_of_DK: </label>
              				        <a href="#" id="South_of_DK" editable-text="taxon.attributes.South_of_DK" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
              				            {{ taxon.attributes.South_of_DK || 'n/a' }}
              				          </a>
            						   </td></tr>
	            						  <tr><td  st-ratio="100">
	              						 <label class="control-label" for="West_of_DK">West_of_DK: </label>
	              				        <a href="#" id="North_of_DK" editable-text="taxon.attributes.West_of_DK" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
	              				            {{ taxon.attributes.West_of_DK || 'n/a' }}
	              				          </a>
	            						   </td></tr>
		            						  <tr><td  st-ratio="100">
		              						 <label class="control-label" for="East_of_DK">East_of_DK: </label>
		              				        <a href="#" id="East_of_DK" editable-text="taxon.attributes.East_of_DK" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
		              				            {{ taxon.attributes.East_of_DK || 'n/a' }}
		              				          </a>
		            						   </td></tr>
						  </table>
			  	      </div>
			  	    </div>
			  	  </div>
			  	  <!-- ########################################-->
			  	  <!-- ########################################-->
			  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
			  	    <div class="panel-heading" role="tab">
			  	      <h4 class="panel-title">
			  	        <a bs-collapse-toggle>
			  	          Vernacular names
			  	        </a>
			  	      </h4>
			  	    </div>
			  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
			  	      <div class="panel-body">
						  <table class="table table-bordered">
							   <tr ><td st-ratio="100">
						 <label class="control-label" for="vernacular_name_DE">DE: </label>
				        <a href="#" id="vernacular_name_DE" editable-text="taxon.attributes.vernacular_name_DE" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
				            {{ taxon.attributes.vernacular_name_DE || 'n/a' }}
				          </a>
						  </td></tr>
						  <tr><td  st-ratio="100">
  						 <label class="control-label" for="vernacular_name_Fi">Fi: </label>
  				        <a href="#" id="vernacular_name_Fi" editable-text="taxon.attributes.vernacular_name_Fi" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
  				            {{ taxon.attributes.vernacular_name_Fi || 'n/a' }}
  				          </a>
						   </td></tr>
   						  <tr><td  st-ratio="100">
     						 <label class="control-label" for="vernacular_name_FR">FR: </label>
     				        <a href="#" id="vernacular_name_FR" editable-text="taxon.attributes.vernacular_name_FR" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
     				            {{ taxon.attributes.vernacular_name_FR || 'n/a' }}
     				          </a>
   						   </td></tr>
    						  <tr><td  st-ratio="100">
      						 <label class="control-label" for="vernacular_name_GB">GB: </label>
      				        <a href="#" id="vernacular_name_GB" editable-text="taxon.attributes.vernacular_name_GB" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
      				            {{ taxon.attributes.vernacular_name_GB || 'n/a' }}
      				          </a>
    						   </td></tr>
       						  <tr><td  st-ratio="100">
         						 <label class="control-label" for="vernacular_name_NL">NL: </label>
         				        <a href="#" id="vernacular_name_NL" editable-text="taxon.attributes.vernacular_name_NL" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
         				            {{ taxon.attributes.vernacular_name_NL || 'n/a' }}
         				          </a>
       						   </td></tr>
        						  <tr><td  st-ratio="100">
          						 <label class="control-label" for="vernacular_name_NO">NO: </label>
          				        <a href="#" id="vernacular_name_NO" editable-text="taxon.attributes.vernacular_name_NO" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
          				            {{ taxon.attributes.vernacular_name_NO || 'n/a' }}
          				          </a>
        						   </td></tr>
           						  <tr><td  st-ratio="100">
             						 <label class="control-label" for="vernacular_name_SE">SE: </label>
             				        <a href="#" id="vernacular_name_SE" editable-text="taxon.attributes.vernacular_name_SE" onaftersave="Taxon.updateAttributes({id: taxon._id}, taxon.attributes)">
             				            {{ taxon.attributes.vernacular_name_SE || 'n/a' }}
             				          </a>
           						   </td></tr>
						  </table>
			  	      </div>
			  	    </div>
			  	  </div>
			  	  <!-- ########################################-->
				  <!-- ########################################-->
				  <div class="panel panel-default" ng-if="taxon._id !== undefined">
				    <div class="panel-heading" role="tab">
				      <h4 class="panel-title">
				        <a bs-collapse-toggle>
				          {{'Images' | translate}} ( {{taxon.images.length}} )
				        </a>
				      </h4>
				    </div>
				    <div class="panel-collapse" role="tabpanel" bs-collapse-target>
				      <div class="panel-body" ng-controller="ImageFormCtrl">
					    <div>				
							
					     <carousel  interval="" on-carousel-change="onSlideChanged(nextSlide, direction, nextIndex)">
					        <slide  ng-repeat="slide in taxon.images" active="slide.active">
					          <img ng-src="{{slide.uri | httpToHttps}}" style="margin:auto;">
					          <div class="carousel-caption">
         
					            &copy; {{slide.photographer}}, {{slide.collectionNumber}}
					          </div>
							  
					        </slide>
				
					      </carousel>
				    </div>

					 <!-- ########################################-->
		
		
				    <form editable-form name="imageForm" onaftersave="saveOrUpdateImage()" onaftersave="validateImage()" >
					<div>	<button class="btn btn-success" ng-click="newPhoto();" ng-show="!imageForm.$visible">Add photo</button> <button class="btn btn-primary" ng-click="editImage()" ng-show="taxon.images.length > 0 && !imageForm.$visible">Update photo info</button> <button class="btn btn-danger pull-right" ng-show="taxon.images.length > 0 && !imageForm.$visible" ng-click="deleteImage()">Delete photo</button></div>
				      <div>
				        <!-- editable username (text with validation) -->
				        <span class="title">Thumbnail url: </span>
				        <span editable-url="currentImage.thumburi" e-name="thumburi" e-required>{{ currentImage.thumburi || 'empty' }}</span>
				      </div> 

				      <div>
				        <!-- editable username (text with validation) -->
				        <span class="title">Url: </span>
				        <span editable-url="currentImage.uri" e-name="uri" e-required>{{ currentImage.uri || 'empty' }}</span>
				      </div> 
		  
				      <div>
				        <!-- editable username (text with validation) -->
				        <span class="title">Photographer: </span>
				        <span editable-text="currentImage.photographer" e-name="photographer" e-required>{{ currentImage.photographer || 'empty' }}</span>
				      </div>
		  
				      <div>
				        <!-- editable username (text with validation) -->
				        <span class="title">collectionNumber: </span>
				        <span editable-text="currentImage.collectionNumber" e-name="collectionNumber" e-required>{{ currentImage.collectionNumber || 'empty' }}</span>
				      </div>
		  
				      <div>
				        <!-- editable username (text with validation) -->
				        <span class="title">Country: </span>
				        <span editable-text="currentImage.country" e-name="country" e-required>{{ currentImage.country || 'empty' }}</span>
				      </div>
	

				      <div class="buttons">
	      
				        <!-- buttons to submit / cancel form -->
				        <span ng-show="imageForm.$visible">
				          <button type="submit" class="btn btn-primary" ng-disabled="imageForm.$waiting">
				            Save
				          </button>
				          <button type="button" class="btn btn-default" ng-disabled="imageForm.$waiting" ng-click="imageForm.$cancel()">
				            Cancel
				          </button>
				        </span>
				      </div>
				    </form> 
				  </div>
				  <!-- ########################################-->
			  	
				</div>
				
				</div>
		  	  <!-- ########################################-->
		  	  <div class="panel panel-default" ng-if="taxon._id !== undefined">
		  	    <div class="panel-heading" role="tab">
		  	      <h4 class="panel-title">
		  	        <a bs-collapse-toggle>
		  	          {{'History log' | translate}}
		  	        </a>
		  	      </h4>
		  	    </div>
		  	    <div class="panel-collapse" role="tabpanel" bs-collapse-target ng-controller="TaxonLogCtrl">
		  	      <div class="panel-body">
					  <table class="table table-bordered" st-pipe="callServer" st-table="displayed">
					  	<thead>
					  	<tr>
		
					  		<th st-sort="createdAt" st-sort-default="reverse">Created</th>
					  		<th st-sort="eventname">Event</th>
					  		<th st-sort="description">Description</th>
					  		<th st-sort="User.name">User</th>
					  	</tr>
					  	<tr>
		
					  		<th><input class="form-control" st-search="createdAt"></th>
					  		<th><input class="form-control" st-search="eventname"></th>
					  		<th><input class="form-control" st-search="description"></th>
					  		<th><input class="form-control" st-search="User.name"></th>
					  	</tr>
					  	</thead>
					  	<tbody ng-show="!isLoading">
					  	<tr ng-repeat="row in displayed">
					  		<td>{{row.createdAt | date : 'medium'}}</td>
					  		<td><strong>{{row.eventname}}</strong></td>
					  		<td><span ng-bind-html="formatIndexFungorumLogEvent(row.description)" ng-if="row.eventname === 'Changed Index Fungorum record'"></span><span ng-if="row.eventname !== 'Changed Index Fungorum record'">{{row.description}}</span></td>
					  		<td>{{row.User.name}}</td>
		
					  	</tr>
					  	</tbody>
					  	<tbody ng-show="isLoading">
					  	<tr>
					  		<td colspan="4" class="text-center">Loading ... </td>
					  	</tr>
					  	</tbody>
					  	<tfoot>
					  	<tr>
					  		<td class="text-center" st-pagination="" st-items-by-page="10" colspan="4">
					  		</td>
					  	</tr>
					  	</tfoot>
					  </table>
		  	      </div>
		  	    </div>
		  	  </div>
		  	  <!-- ########################################-->
	  	 
				
			
	</div>	
		
	</div>
	</div>
	<div layout="row" id="footer"  layout-align="space-around center" layout-margin ng-include="'components/footer/footer.html'">
        
	      </div>
	   </md-content>
	

	

